<p>The use of <code>document.write</code> causes a dependency to the page on its return to be fully loaded.</p>
<p>这个（坏）方法已经被开发者抛弃了很多年, 但是在某些情况下仍然是需要的，例如在一些Javascript文件的同步回退中。</p>
<p>举例来说，如果发现Google的CDN没有响应，<a href="https://github.com/h5bp/html5-boilerplate/">HTML5 Boilerplate</a>则会通过这个方法来调用本地的jQuery库。</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">window.jQuery || document.write(<span class="hljs-string">'&lt;script src="js/vendor/jquery-1.9.0.min.js"&gt;&lt;\/script&gt;'</span>)</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p><strong>&gt; 注意:</strong> <em>如果在<code>window.onload</code>事件中或之后执行<code>document.write</code>方法，会将当前页面替换掉。</em></p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">span</span>&gt;</span>foo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
  window.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    document.write(<span class="hljs-string">'&lt;span&gt;bar&lt;/span&gt;'</span>);
  };
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>这段代码执行后的结果是页面中只会呈现出<em>bar</em>字符，而不是期望的出现<em>foobar</em>。在<code>window.onload</code>事件之后执行也是同样的结果。</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">span</span>&gt;</span>foo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
  setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    document.write(<span class="hljs-string">'&lt;span&gt;bar&lt;/span&gt;'</span>);
  }, <span class="hljs-number">1000</span>);
  window.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-comment">// ...</span>
  };
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>这段代码执行的结果和上一段代码的结果相同。</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#avoid-documentwrite">参考</a></em></p>
