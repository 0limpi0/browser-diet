<!doctype html>
<html lang="cs-CZ" itemscope itemtype="http://schema.org/CreativeWork">
<head>

  <title>Jak shodit váhu (v prohlížeči)</title>

  <!-- Metatags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Definitivní příručka pro výkon webu">
  <meta name="keywords" content="front-end, web performance, cache, compress, minify, combine">

  <!-- Schema.org -->
  <meta itemprop="name" content="Jak shodit váhu (v prohlížeči)">
  <meta itemprop="url" content="http://zenorocha.github.io/browser-diet">
  <meta itemprop="image" content="http://zenorocha.github.io/browser-diet/en/assets/img/share.jpg">
  <meta itemprop="description" content="Definitivní příručka pro výkon webu">

  <!-- Style -->
  <link rel="stylesheet" href="http://zenorocha.github.io/browser-diet/en/assets/css/all.min.css">

  <!-- Fonts -->
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans|Pacifico">

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="http://zenorocha.github.io/browser-diet/en/assets/img/favicon.ico">

</head>

<body class="cs">

  <div id="header">

    <div id="top-bar" class="subtitle">
      <div class="center">

        <div id="language-picker">
          <a href="/cs" class="flags" id="flat-cs">&nbsp;</a>

          <div class="available-languages">
            <a id="flag-en" class="flags" href="http://browserdiet.com/" title="English">English</a>
            <a id="flag-es" class="flags" href="http://browserdiet.com/es/" title="Español">Español</a>
            <a id="flag-pt" class="flags" href="http://browserdiet.com/pt/" title="Português">Português</a>
            <a id="flag-pl" class="flags" href="http://browserdiet.com/pl/" title="Polski">Polski</a>
            <a id="flag-zh" class="flags" href="http://browserdiet.com/zh/" title="中国的">中国的</a>
            <a id="flag-fr" class="flags" href="http://browserdiet.com/fr/" title="Français">Français</a>
            <a id="flag-cs" class="flags" href="http://browserdiet.com/cs/" title="Česky">česky</a>
            <a id="flag-jp" class="flags" href="http://browserdiet.com/jp/" title="日本語">日本語</a>
          </div>
        </div>

        <h3>Definitivní příručka pro výkon webu</h3>

      </div>
    </div>

    <a href="https://github.com/zenorocha/browser-diet">
      <img id="github-ribbon" src="http://zenorocha.github.io/browser-diet/en/assets/img/github-fork.png" alt="Fork me on GitHub" width="149" height="149">
    </a>

    <div class="center">
      <div class="intro">
        <hgroup class="intro-titles">
          <h1>Jak shodit <span>váhu</span></h1><h2>v prohlížeči</h2>
        </hgroup>

        <div class="superman">
          <img class="superman-geek" src="http://zenorocha.github.io/browser-diet/en/assets/img/superman.png" alt="Superman">
          <img class="superman-raios" src="http://zenorocha.github.io/browser-diet/en/assets/img/raios.png" alt="">
        </div>
      </div>

    </div>

    <div id="menu">
      <ul class="center">
        <li><a href="#html">HTML</a></li>
        <li><a href="#css">CSS</a></li>
        <li><a href="#js">JavaScript</a></li>
        <li><a href="#jquery">jQuery</a></li>
        <li><a href="#images">Obrázky</a></li>
        <li><a href="#server">Server</a></li>
        <li><a href="#bonus">Bonus</a></li>
      </ul>
    </div>

  </div>

  <div id="content">
    <div class="center">


    <div class="article">
      <div class="img-left">
  <img id="geek-17" class="icos-geek" src="http://browserdiet.com/en/assets/img/17.png" alt="Geek #17" width="199" height="275" />
</div>

<p>A co kdybychom dali dohromady partu expertů, kteří se podílí na tvorbě velkých webových stránek, abychom vytvořili definitivní příručku pro výkon front-endu?</p>
<p>A ne jen tak nějakou nudnou příručku vytvořenou pro roboty, co kdybychom vytvořili něco zábavného? Co třeba dát dohromady lidi jako <a href="http://www.brizabueno.com/">Briza Bueno</a> <em>(Americanas.com)</em>, <a href="https://github.com/davidsonfellipe">Davidson Fellipe</a> <em>(Globo.com)</em>, <a href="https://github.com/keppelen">Giovanni Keppelen</a> <em>(ex-Peixe Urbano)</em>, <a href="https://github.com/jaydson">Jaydson Gomes</a> <em>(Terra)</em>, <a href="https://github.com/marcelduran">Marcel Duran</a> <em>(Twitter)</em>, <a href="https://github.com/miketaylr">Mike Taylor</a> <em>(Opera)</em>, <a href="https://github.com/mangini">Renato Mangini</a> <em>(Google)</em>, a <a href="http://sergiolopes.org">Sérgio Lopes</a> <em>(Caelum)</em>, aby měla naše příručka pořádné reference?</p>
<p>To je přesně věc, kterou jsme udělali! A povedeme vás tímto bojem za vytvoření ještě rychlejších stránek.</p>
<p class="project-leader">&mdash; <a href="http://zenorocha.com/">Zeno Rocha</a>, vedoucí projektu.</p>
    </div>

    <div class="article">
      <h1 id="performance-matters">
  <a class="tip-title" href="#performance-matters">Opravdu na výkonu záleží?</a>
  <a title="Link" class="anchor" href="#performance-matters">∞</a>
</h1>

<div class="line">
  <span class="order">??</span>
  <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/intro/en/performance-matters.html">✎</a>
</div>

<p>Jasně, že záleží a vy to víte. Tak proč vytvářet pomalé stránky, které vedou ke špatnému uživatelskému prožitku? Toto je komunitní příručka praktických tipů, která vám ukáže, jak dělat webové stránky rychlejší. Neplýtvejme čas ukazováním <a href="https://github.com/zenorocha/browser-diet/wiki/Impact-of-performance">případových studií</a> a pojďme rovnou na věc!</p>
    </div>


      <h2 id="html" class="topics"><span>HTML</span></h2>



  <div class="article" id="article-avoid-inline">
    <h1 id="avoid-inline">
      <a class="tip-title" href="#avoid-inline">Vyhněte se inline/vloženému kódu</a>
      <a title="Link" class="anchor" href="#avoid-inline">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/html/cs/avoid-inline.html.md">✎</a>
    </div>

    <p>Existují tři základní cesty, jak vložit CSS nebo JavaScript do stránky:</p>
<p><strong>1) Inline:</strong> CSS je definováno uvnitř <code>style</code> atributu a JavaScript například uvnitř <code>onclick</code> atributu u libovolné HTML značky.</p>
<p><strong>2) Vložené:</strong> CSS je definováno uvnitř <code>&lt;style&gt;</code> tagu a JavaScript uvnitř <code>&lt;script&gt;</code> tagu.</p>
<p><strong>3) Externí:</strong> CSS je nahráno z <code>&lt;link&gt;</code> a JavaScript z <code>src</code> atributu tagu <code>&lt;script&gt;</code>.</p>
<p>První dvě varianty, nehledě na to, že snižují počet HTTP požadavků, ve skutečnosti zvětšují velikost HTML dokumentu. Přesto to může být výhodné, pokud máte malé soubory a náklady na request jsou větší problém. V takovém případě spusťe testy a vyhodnoťte, zda nastane zrychlení. Také zvažte smysl vaší stránky a její návštěvnost: pokud očekáváte, že uživatel navštíví stránku jen jednou, například při nějaké dočasné kampani, kde nečekáte, že se uživatel bude vracet, inlinový/vložený kód pomůže snížit počet HTTP požadavků.</p>
<p><em>&gt; Vyhněte se psaní CSS/JS uvnitř vašeho HTML (raději jej automatizujte pomocí nástrojů).</em></p>
<p>Třetí varianta nejen zlepšuje organizaci vašeho kódu, ale také umožňuje prohlížečům aktivovat kešování. Tato varianta by měla být preferována pro naprostou většinu případů, zvláště pokud pracujete s velkými soubory a mnoha stránkami.</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#avoid-inlineembedded-code">Užitečné nástroje</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#avoid-inlineembedded-code">Reference</a></em></p>

  </div>



  <div class="article" id="article-css-on-top-js-on-bottom">
    <h1 id="css-on-top-js-on-bottom">
      <a class="tip-title" href="#css-on-top-js-on-bottom">Styly nahoru/scripty dolů</a>
      <a title="Link" class="anchor" href="#css-on-top-js-on-bottom">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/html/cs/css-on-top-js-on-bottom.html.md">✎</a>
    </div>

    <p>Když vložíme styly do <code>&lt;head&gt;</code>, umožníme tak progresivní vykreslení stránky. Uživateli se tak zdá, že se stránka načítá rychleji.</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Browser Diet<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- CSS --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"style.css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
</code></pre>
<p>Pokud ale vložíme styly na konec stránky, nejprve dojde k vykreslení beze stylů, až poté jsou styly staženy a aplikovány.</p>
<div class="img-right">
  <img id="geek-32" class="icos-geek" src="http://browserdiet.com/en/assets/img/32.png" alt="Geek #32" width="139" height="275" />
</div>

<p>Na druhou stranu když jde o JavaScript, je důležité umístit skripty na spodek stránky, protože ty blokují vykreslování stránky, zatímco jsou načítány a spouštěny.</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- JS --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"script.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
</code></pre>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#styles-up-top-scripts-down-bottom">Reference</a></em></p>

  </div>



  <div class="article" id="article-async">
    <h1 id="async">
      <a class="tip-title" href="#async">Zkuste async</a>
      <a title="Link" class="anchor" href="#async">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/html/cs/async.html.md">✎</a>
    </div>

    <p>Abychom vysvětlili, jak je tento atribut užitečný pro lepší výkon, je dobré pochopit, co se děje, když jej nepoužijeme.</p>
<div class="img-left">
  <img id="geek-20" class="icos-geek" src="http://browserdiet.com/en/assets/img/20.png" alt="Geek #20" width="118" height="275" />
</div>

<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"example.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>V tomto případě musí stránka čekat, dokud není skript celý stažený, naparsovaný a spuštěný, před tím, než může být zpracováno a vykresleno další HTML. To může značně prodloužit čas načítání vaší stránky. Občas je takové chování požadováno, obecně však ne.</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">async</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"example.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>Skript je stažen asynchronně, zatímco pokračuje parsování zbytku stránky. Je garantováno, že se skript spustí hned, jak bude stažen. Mějte na mysli, že v případě více asynchronních skriptů není nijak zaručeno, v jakém pořadí budou spuštěny.</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#try-out-async">Reference</a></em></p>

  </div>




      <h2 id="css" class="topics"><span>CSS</span></h2>



  <div class="article" id="article-minify-css">
    <h1 id="minify-css">
      <a class="tip-title" href="#minify-css">Minimalizujte vaše kaskádové styly</a>
      <a title="Link" class="anchor" href="#minify-css">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/css/cs/minify-css.html.md">✎</a>
    </div>

    <p>Pro udržení čitelného kódu je rozumné psát komentáře a používat odsazení:</p>
<pre class="highlight"><code class="css"><span class="hljs-class">.center</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">960</span>px</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"> <span class="hljs-number">0</span> auto</span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-comment">/* --- Structure --- */</span>

<span class="hljs-class">.intro</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"> <span class="hljs-number">100</span>px</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">position</span>:<span class="hljs-value"> relative</span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>Ale prohlížeči na ničem z toho nezáleží. Proto vždy pamatujte na minimalizaci vašich CSS pomocí automatizovaných nástrojů.</p>
<pre class="highlight"><code class="css"><span class="hljs-class">.center</span><span class="hljs-rules">{<span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"><span class="hljs-number">960</span>px</span></span>;<span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"><span class="hljs-number">0</span> auto</span></span></span>}<span class="hljs-class">.intro</span><span class="hljs-rules">{<span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"><span class="hljs-number">100</span>px</span></span>;<span class="hljs-rule"><span class="hljs-attribute">position</span>:<span class="hljs-value">relative</span></span></span>}
</code></pre>
<p>Minimalizace ořeže přebytečné bajty ze souboru, což vede k rychlejšímu stažení, parsování a spuštění.</p>
<p>Pro ty, kteří používají pre-procesory jako <a href="http://sass-lang.com/">Sass</a>, <a href="http://lesscss.org/">Less</a>, a <a href="http://learnboost.github.com/stylus/">Stylus</a>, je možné nakonfigurovat, aby byl kompilovaný CSS výstup minimalizován.</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#minify-your-stylesheets">Užitečné nástroje</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#minify-your-stylesheets">Reference</a></em></p>

  </div>



  <div class="article" id="article-combine-css">
    <h1 id="combine-css">
      <a class="tip-title" href="#combine-css">Sloučení více CSS souborů</a>
      <a title="Link" class="anchor" href="#combine-css">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/css/cs/combine-css.html.md">✎</a>
    </div>

    <p>Další doporučovaná technika pro organizaci a správu stylů je rozdělení na modulární komponenty.</p>
<div class="img-right">
  <img id="geek-9" class="icos-geek" src="http://browserdiet.com/en/assets/img/9.png" alt="Geek #9" width="122" height="275" />
</div>

<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"structure.css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"banner.css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"layout.css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"component.css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"plugin.css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span>&gt;</span>
</code></pre>
<p>Pak je ale třeba pro každý takový soubor jeden HTTP request (a je známo, že prohlížeče mohou stahovat jen omezený počet zdrojů souběžně).</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"main.css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span>&gt;</span>
</code></pre>
<p>Tak tedy kombinujte svá CSS. Menší počet souborů vede k menšímu počtu requestů a rychlejšímu načtení stránky.</p>
<p>Chcete využít to nejlepší z obou světů? Automatizujte tento proces pomocí buidlovacích nástrojů.</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#combining-multiple-css-files">Užitečné nástroje</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#combining-multiple-css-files">Reference</a></em></p>

  </div>



  <div class="article" id="article-prefer-link-over-import">
    <h1 id="prefer-link-over-import">
      <a class="tip-title" href="#prefer-link-over-import">Preferujte &lt;link&gt; před @import</a>
      <a title="Link" class="anchor" href="#prefer-link-over-import">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/css/cs/prefer-link-over-import.html.md">✎</a>
    </div>

    <p>Existují dvě varianty, jak vložit externí styl do stránky: buď pomocí značky <code>&lt;link&gt;</code>:</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"style.css"</span>&gt;</span>
</code></pre>
<p>nebo pomocí direktivy <code>@import</code> (uvnitř externího stylu nebo ve značce <code>&lt;style&gt;</code>):</p>
<pre class="highlight"><code class="css"><span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-function">url(<span class="hljs-string">'style.css'</span>)</span></span>;
</code></pre>
<p>Pokud použijete druhou variantu v externím stylu, prohlížeč není schopen stahovat soubor paralelně, což může způsobit zdržení při stahování dalších souborů.</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#prefer--over-import">Reference</a></em></p>

  </div>




      <h2 id="js" class="topics"><span>JavaScript</span></h2>



  <div class="article" id="article-3rd-party-async">
    <h1 id="3rd-party-async">
      <a class="tip-title" href="#3rd-party-async">Nahrávejte obsah třetích stran asynchronně</a>
      <a title="Link" class="anchor" href="#3rd-party-async">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/js/cs/3rd-party-async.html.md">✎</a>
    </div>

    <p>Kdo nikdy nenahrával obsah třetích stran k vložení Youtube videa nebo like/tweet tlačítka?</p>
<div class="img-right">
  <img id="geek-46" class="icos-geek" src="http://browserdiet.com/en/assets/img/46.png" alt="Geek #46" width="158" height="275" />
</div>

<p>Velký problém je, že tyto kódy nejsou vždy nahrávány efektivně. Ať už z důvodu špatného připojení uživatele nebo serveru, kde jsou hostovány. Nebo tato služba může být dočasně mimo provoz, blokována uživatelem nebo firemním firewallem.</p>
<p>V případě takových problémů může dojít k výrazným komplikacím při nahrávání stránky, případně úplnému zablokování načítání. Tyto skripty by proto měly vždy být načítány asynchronně (nebo používejte <em><a href="https://www.facebook.com/note.php?note_id=10151176218703920">Friendly iFrames</a></em>).</p>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> script = document.createElement(<span class="hljs-string">'script'</span>),
    scripts = document.getElementsByTagName(<span class="hljs-string">'script'</span>)[<span class="hljs-number">0</span>];
script.async = <span class="hljs-literal">true</span>;
script.src = url;
scripts.parentNode.insertBefore(script, scripts);
</code></pre>
<p>Alternativně, pokud chcete nahrávat více widgetů třetích stran, můžete je nahrát asynchronně pomocí <a href="https://gist.github.com/zenorocha/5161860">tohoto skriptu</a>.</p>
<p><em>&gt; <a href="http://www.webpagetest.org/video/view.php?id=111011_4e0708d3caa23b21a798cc01d0fdb7882a735a7d">Video</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#load-3rd-party-content-asynchronously">Reference</a></em></p>

  </div>



  <div class="article" id="article-cache-array-lengths">
    <h1 id="cache-array-lengths">
      <a class="tip-title" href="#cache-array-lengths">Kešujte délku pole</a>
      <a title="Link" class="anchor" href="#cache-array-lengths">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/js/cs/cache-array-lengths.html.md">✎</a>
    </div>

    <p>Smyčka je nepochybně jedna z nejpodstatnějších částí ovlivňujících výkon JavaScriptu. Zkuste optimalizovat logiku uvnitř smyčky tak, aby každá iterace byla vykonána užitečně.</p>
<p>Jedna z cest, jak toho dosáhnout, je uložit si délku pole, se kterým se pracuje, aby nemusela být opakovaně zjišťována v každé iteraci.</p>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">1000</span>),
    len, i;

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) {
  <span class="hljs-comment">// Spatne - velikost musi byt prepocitana 1000x</span>
}

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, len = arr.length; i &lt; len; i++) {
  <span class="hljs-comment">// Dobre - velikost je zjistena jen jednou a ihned ulozena</span>
}
</code></pre>
<p><em><a href="http://jsperf.com/browser-diet-cache-array-length/10/">&gt; Výsledky na JSPerf</a></em></p>
<p><strong>&gt; Poznámka:</strong> <em>Přestože moderní prohlížeče automaticky optimalizují tento proces, stále je tato doporučovaná technika užitečná pro starší prohlížeče.</em></p>
<p>Při iterování přes kolekce v HTML, jako jsou seznamy Nodů (<em>NodeList</em>) vytvořené například pomocí volání <code>document.getElementsByTagName(&#39;a&#39;)</code> je celá věc ještě více kritická. Tyto kolekce jsou považovány za &quot;živé&quot; , protože se automaticky aktualizují, když nastane změna v elementu, ke kterému patří.</p>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> links = document.getElementsByTagName(<span class="hljs-string">'a'</span>),
    len, i;

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; links.length; i++) {
  <span class="hljs-comment">// Spatne - pri kazde iteraci dojde k opetovnemu vypoctu delky pole, kdyby se nahodou zmenila</span>
}

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, len = links.length; i &lt; len; i++) {
  <span class="hljs-comment">// Dobre - delka pole je jednou ziskana a ulozena, pote se v iteraci pouziva jen ta predpoctena</span>
}

<span class="hljs-comment">// Desive: ukazka nekonecne smycky</span>
<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; links.length; i++) {
  document.body.appendChild(document.createElement(<span class="hljs-string">'a'</span>));
  <span class="hljs-comment">// Pri kazde iteraci naroste seznam linku, nikdy tak nedojde k naplneni podminky pro ukonceni cyklu</span>
  <span class="hljs-comment">// to by se nestalo, kdyby se velikost pole predem ulozila do promenne a pak pouzila ve smycce</span>
}
</code></pre>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#cache-array-lengths">Reference</a></em></p>

  </div>



  <div class="article" id="article-documentwrite">
    <h1 id="documentwrite">
      <a class="tip-title" href="#documentwrite">Vyhněte se document.write</a>
      <a title="Link" class="anchor" href="#documentwrite">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/js/cs/documentwrite.html.md">✎</a>
    </div>

    <p>Použití <code>document.write</code> vytváří závislost na kompletním načtení stránky.</p>
<p>Tato (špatná) praktika je developery už roky zavrhována, přesto ale existují případy, kdy je potřebná. Třeba jako synchronní fallback pro některé JavaScriptové soubory.</p>
<p><a href="https://github.com/h5bp/html5-boilerplate/">HTML5 Boilerplate</a>, například používá tuto techniku pro načtení jQuery lokálně, pokud <em>CDN</em> od Google není dostupná.</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">window.jQuery || document.write(<span class="hljs-string">'&lt;script src="js/vendor/jquery-1.9.0.min.js"&gt;&lt;\/script&gt;'</span>)</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p><strong>&gt; Pozor:</strong> <em><code>document.write</code> vykonaný během nebo po <code>window.onload</code> události nahradí kompletní obsah současné stránky.</em></p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">span</span>&gt;</span>foo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
  window.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    document.write(<span class="hljs-string">'&lt;span&gt;bar&lt;/span&gt;'</span>);
  };
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>Výsledek finální stránky bude pouze <em>bar</em> a nikoliv <em>foobar</em>, jak by se dalo čekat. To samé nastane, pokud se spustí po události <code>window.onload</code>.</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">span</span>&gt;</span>foo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
  setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    document.write(<span class="hljs-string">'&lt;span&gt;bar&lt;/span&gt;'</span>);
  }, <span class="hljs-number">1000</span>);
  window.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-comment">// ...</span>
  };
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>Výsledek bude stejný jako předcházející příklad, pokud se funkce naplánovaná pomocí <code>setTimeout</code> vykoná po události <code>window.onload</code>.</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#avoid-documentwrite">Reference</a></em></p>

  </div>



  <div class="article" id="article-repaints-and-reflows">
    <h1 id="repaints-and-reflows">
      <a class="tip-title" href="#repaints-and-reflows">Minimalizujte Repaints a Reflows</a>
      <a title="Link" class="anchor" href="#repaints-and-reflows">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/js/cs/repaints-and-reflows.html.md">✎</a>
    </div>

    <p>Repaints a reflows se vyskytují v případě, že existuje proces překreslující DOM, když se změní nějaká vlastnost elementu.</p>
<p>Repaint je spuštěn v případě, že se změní vzhled elementu bez toho, aby se změnil jeho layout. Nicole Sullivan jako příklad uvádí změnu stylů, třeba <code>background-color</code>.</p>
<p>Reflow je mnohem nákladnější, protože je způsoben změnou layoutu stránky, jako je například změna šířky elementu.</p>
<p>Není pochyb, že je dobré se těmto náročným repaints a reflows vyhnout, takže například místo tohoto:</p>
<div class="img-right">
  <img id="geek-55" class="icos-geek" src="http://browserdiet.com/en/assets/img/55.png" alt="Geek #55" width="163" height="275" />
</div>

<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> div = document.getElementById(<span class="hljs-string">"to-measure"</span>),
    lis = document.getElementsByTagName(<span class="hljs-string">'li'</span>),
    i, len;

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, len = lis.length; i &lt; len; i++) {
  lis[i].style.width = div.offsetWidth + <span class="hljs-string">'px'</span>;
}
</code></pre>
<p>zkuste toto:</p>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> div = document.getElementById(<span class="hljs-string">"to-measure"</span>),
    lis = document.getElementsByTagName(<span class="hljs-string">'li'</span>),
    widthToSet = div.offsetWidth,
    i, len;

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, len = lis.length; i &lt; len; i++) {
  lis[i].style.width = widthToSet + <span class="hljs-string">'px'</span>;
}
</code></pre>
<p>Když nastavíte <code>style.width</code>, prohlížeč musí přepočítat layout. Obvykle je několik změn stylů elementů spojeno do jednoho reflow, protože to prohlížeč nemusí řešit, dokud nedojde k aktualizaci obrazovky. Každopádně  v prvním příkladě jsme používali <code>offsetWidth</code>, což je šířka layoutu elementu, prohlížeč tedy musí přepočítat layout.</p>
<p>Pokud potřebujete číst data layoutu ze stránky, udělejte tak naráz - předtím, než začnete nastavovat cokoliv, co mění layout, jak je ukázáno v druhém příkladě.</p>
<p><em>&gt; <a href="http://jsbin.com/aqavin/2/quiet">Demo</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#minimize-repaints-and-reflows">Reference</a></em></p>

  </div>



  <div class="article" id="article-dont-touch-dom">
    <h1 id="dont-touch-dom">
      <a class="tip-title" href="#dont-touch-dom">Vyhněte se zbytečným manipulacím v DOM</a>
      <a title="Link" class="anchor" href="#dont-touch-dom">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/js/cs/dont-touch-dom.html.md">✎</a>
    </div>

    <p>Pokaždé, když sáhnete na DOM zbytečně, jedno koťátko zemře.</p>
<p>Vážně, průchod DOMem je nákladný. I přes to, že jsou dnes JavaScriptové enginy výrazně rychlejší a vykonnější, vždy se snažte optimalizovat dotazy nad DOM.</p>
<p>Jedna z nejužitečnějších rad zní: když přistupujete k elementu více než jedenkrát, uložte si jej do proměnné, ať se nemusíte dotazovat DOMu vícekrát.</p>
<pre class="highlight"><code class="javascript"><span class="hljs-comment">// opravdu spatne!</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
  document.getElementById(<span class="hljs-string">"myList"</span>).innerHTML += <span class="hljs-string">"&lt;span&gt;"</span> + i + <span class="hljs-string">"&lt;/span&gt;"</span>;
}
</code></pre>
<pre class="highlight"><code class="javascript"><span class="hljs-comment">// mnohem lepsi :)</span>
<span class="hljs-keyword">var</span> myList = <span class="hljs-string">""</span>;

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
  myList += <span class="hljs-string">"&lt;span&gt;"</span> + i + <span class="hljs-string">"&lt;/span&gt;"</span>;
}

document.getElementById(<span class="hljs-string">"myList"</span>).innerHTML = myList;
</code></pre>
<pre class="highlight"><code class="javascript"><span class="hljs-comment">// mnohem mnohem lepsi :)</span>
<span class="hljs-keyword">var</span> myListHTML = document.getElementById(<span class="hljs-string">"myList"</span>).innerHTML;

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
  myListHTML += <span class="hljs-string">"&lt;span&gt;"</span> + i + <span class="hljs-string">"&lt;/span&gt;"</span>;
}
</code></pre>
<p><em>&gt; <a href="http://jsperf.com/browser-diet-dom-manipulation/11">Výsledky na JSPerf</a></em></p>

  </div>



  <div class="article" id="article-minify-js">
    <h1 id="minify-js">
      <a class="tip-title" href="#minify-js">Minimalizujte vaše scripty</a>
      <a title="Link" class="anchor" href="#minify-js">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/js/cs/minify-js.html.md">✎</a>
    </div>

    <p>Stejně jako u CSS, k udržení čitelného kódu je dobré psát komentáře a odsazovat:</p>
<pre class="highlight"><code class="javascript">BrowserDiet.app = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

  <span class="hljs-keyword">var</span> foo = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">return</span> {
    bar: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-comment">// do something</span>
    }
  };

};
</code></pre>
<p>Ale prohlížeči na ničem z toho nezáleží. Proto vždy pamatujte na minimalizaci vašich JavaScriptů pomocí automatizovaných nástrojů.</p>
<pre class="highlight"><code class="javascript">BrowserDiet.app=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span><span class="hljs-keyword">var</span> a=!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>{bar:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>}}}
</code></pre>
<p>Minimalizace ořeže přebytečné byty ze souboru, což vede k rychlejšímu stažení, parsování a spuštění.</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#minify-your-script">Užitečné nástroje</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#minify-your-script">Reference</a></em></p>

  </div>



  <div class="article" id="article-combine-js">
    <h1 id="combine-js">
      <a class="tip-title" href="#combine-js">Slučujte více JS souborů do jediného</a>
      <a title="Link" class="anchor" href="#combine-js">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/js/cs/combine-js.html.md">✎</a>
    </div>

    <p>Další doporučovanou technikou pro organizaci a správu skriptů je rozdělení na modulární komponenty.</p>
<div class="img-right">
  <img id="geek-47" class="icos-geek" src="http://browserdiet.com/en/assets/img/47.png" alt="Geek #47" width="174" height="275" />
</div>

<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"navbar.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"component.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"page.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"framework.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"plugin.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>Pak je ale třeba pro každý takový soubor jeden HTTP request (a je známo, že prohlížeče mohou stahovat jen omezený počet zdrojů souběžně).</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"main.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>Tak tedy kombinujte své JS. Menší počet souborů vede k menšímu počtu requestů a rychlejšímu načtení stránky.</p>
<p>Chcete využít to nejlepší z obou světů? Automatizujte tento proces pomocí buildovacích nástrojů.</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#combine-multiple-js-files-into-one">Užitečné nástroje</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#combine-multiple-js-files-into-one">Reference</a></em></p>

  </div>




      <h2 id="jquery" class="topics"><span>jQuery</span></h2>



  <div class="article" id="article-latest-version">
    <h1 id="latest-version">
      <a class="tip-title" href="#latest-version">Vždy používejte nejnovější verzi jQuery</a>
      <a title="Link" class="anchor" href="#latest-version">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/jquery/cs/latest-version.html.md">✎</a>
    </div>

    <p>Vývojáři jádra JQuery se stále snaží vylepšovat knihovnu, ať už jde o lepší čitelnost kódu, nové funkce nebo optimalizace stávajících algoritmů.</p>
<div class="img-right">
  <img id="geek-36" class="icos-geek" src="http://browserdiet.com/en/assets/img/36.png" alt="Geek #36" width="144" height="275" />
</div>

<p>Proto vždy používejte nejnovější verzi JQuery. Dostupná je zde, pokud si ji chcete uložit k sobě do souboru:</p>
<pre class="highlight"><code class="xml">http://code.jquery.com/jquery-latest.js
</code></pre>
<p><em>Nikdy</em> ji ale z této URL neodkazujte v tagu <code>&lt;script&gt;</code>, můžete si tak zadělat na problémy, protože je vždy poskytována nejnovější verze
dříve, než máte šanci ji otestovat. Místo toho raději linkujte poslední verzi, kterou máte odzkoušenou.</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>Tak, jak říká moudrý <a href="/img/new-is-always-better.gif">Barney Stinson</a>, <em>&quot;Nové je vždy lepší&quot;</em> :P</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#always-use-the-latest-version-of-jquery">Reference</a></em></p>

  </div>



  <div class="article" id="article-selectors">
    <h1 id="selectors">
      <a class="tip-title" href="#selectors">Selektory</a>
      <a title="Link" class="anchor" href="#selectors">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/jquery/cs/selectors.html.md">✎</a>
    </div>

    <p>Selektory jsou jednou z nejdůležitějších věcí při použití JQuery. Existuje mnoho různých cest, jak vybrat element v DOMu. To ale neznamená, že jsou všechny stejně výkonné. Můžete vybrat element pomocí třídy, ID, metod jako <code>find()</code>, <code>children()</code>.</p>
<p>Mezi všemi, výběr podle ID je nejrychlejší, protože je založen na nativní operaci nad DOM:</p>
<pre class="highlight"><code class="javascript">$(<span class="hljs-string">"#foo"</span>);
</code></pre>
<p><em><a href="http://jsperf.com/browser-diet-jquery-selectors">&gt; Výsledky na JSPerf</a></em></p>

  </div>



  <div class="article" id="article-use-for-instead-of-each">
    <h1 id="use-for-instead-of-each">
      <a class="tip-title" href="#use-for-instead-of-each">Používejte for namísto each</a>
      <a title="Link" class="anchor" href="#use-for-instead-of-each">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/jquery/cs/use-for-instead-of-each.html.md">✎</a>
    </div>

    <p>Využití nativních funkcí JavaScriptu téměř vždy vede k rychlejšímu provedení než obdoby v JQuery. Z toho důvodu raději než metodu <code>jQuery.each</code> používejte nativní <code>for</code> smyčku.</p>
<p>Ale pozor na to, že i když je <code>for in</code> nativní, v mnoha případech je výkon horší, než <code>jQuery.each</code>.</p>
<p>Těžce zkoušená smyčka <code>for</code> nám dává další příležitost k urychlení věcí pomocí kešování délky kolekce, přes kterou iterujeme.</p>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = a.length; i &lt; len; i++ ) {
    e = a[i];
}
</code></pre>
<p>Použití obráceného <code>while</code> a obrácené <code>for</code> smyčky je žhavé téma v komunitě a je často citováno jako nejrychlejší forma iterace. Kvůli špatné čitelnosti se ale používá jen výjimečně.</p>
<p><em>&gt; <a href="http://jsperf.com/browser-diet-jquery-each-vs-for-loop">Výsledky na JSPerf</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#use-for-instead-of-each">Reference</a></em></p>

  </div>



  <div class="article" id="article-dont-use-jquery">
    <h1 id="dont-use-jquery">
      <a class="tip-title" href="#dont-use-jquery">Nepoužívejte JQuery za každou cenu...</a>
      <a title="Link" class="anchor" href="#dont-use-jquery">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/jquery/cs/dont-use-jquery.html.md">✎</a>
    </div>

    <p>Občas může být čistý JavaScript jednodušší a výkonější než jQuery.</p>
<div class="img-right">
  <img id="geek-6" class="icos-geek" src="http://browserdiet.com/en/assets/img/6.png" alt="Geek #6" width="156" height="275" />
</div>

<p>Zvažte následující HTML:</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"text"</span>&gt;</span>Let's change this content<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<p>Místo, abyste napsali:</p>
<pre class="highlight"><code class="javascript">$(<span class="hljs-string">'#text'</span>).html(<span class="hljs-string">'The content is changed'</span>).css({
  backgroundColor: <span class="hljs-string">'red'</span>,
  color: <span class="hljs-string">'yellow'</span>
});
</code></pre>
<p>použijte prostý JavaScript:</p>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> text = document.getElementById(<span class="hljs-string">'text'</span>);
text.innerHTML = <span class="hljs-string">'The text is changed'</span>;
text.style.backgroundColor = <span class="hljs-string">'red'</span>;
text.style.color = <span class="hljs-string">'yellow'</span>;
</code></pre>
<p>Je to jednoduché a <strong>mnohem</strong> rychlejší.</p>
<p><em>&gt; <a href="http://jsperf.com/jquery-vs-javascript-performance-text">Výsledky na JSPerf</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#dont-use-jquery">Reference</a></em></p>

  </div>




      <h2 id="images" class="topics"><span>Obrázky</span></h2>



  <div class="article" id="article-sprites">
    <h1 id="sprites">
      <a class="tip-title" href="#sprites">Použijte CSS Sprites</a>
      <a title="Link" class="anchor" href="#sprites">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/images/cs/sprites.html.md">✎</a>
    </div>

    <p>Tato technika se zabývá skládáním různých obrázků do jediného souboru.</p>
<p><img id="img-sprite" src="http://browserdiet.com/en/assets/img/sprite-example.jpg" alt="CSS Sprite Example"></p>
<p>A jejich následném pozicování pomocí CSS.</p>
<pre class="highlight"><code class="css"><span class="hljs-class">.icon-foo</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-image</span>:<span class="hljs-value"> <span class="hljs-function">url(<span class="hljs-string">'mySprite.png'</span>)</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">background-position</span>:<span class="hljs-value"> -<span class="hljs-number">10</span>px -<span class="hljs-number">10</span>px</span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-class">.icon-bar</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-image</span>:<span class="hljs-value"> <span class="hljs-function">url(<span class="hljs-string">'mySprite.png'</span>)</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">background-position</span>:<span class="hljs-value"> -<span class="hljs-number">5</span>px -<span class="hljs-number">5</span>px</span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>Výsledkem je zásadní snížení počtu HTTP požadavků a nehrozí tak zdržování načítání dalších zdrojů vašich stránek.</p>
<p>Když používáte <em>sprite</em>, vyhněte se příliš velkým bílým místům mezi obrázky. Sice to neovlivňuje velikost souboru, má to ale vliv na spotřebu paměti.</p>
<p>I přes to, že skoro každý techniku spritů zná, není její použití široce rozšířeno&mdash;pravděpodobně proto, že vývojáři nepoužívají automatizační nástroje pro generování spritů. Vypíchli jsme několik takových, které vám s tím mohou pomoci.</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#use-css-sprites">Užitečné nástroje</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#use-css-sprites">Reference</a></em></p>

  </div>



  <div class="article" id="article-data-uri">
    <h1 id="data-uri">
      <a class="tip-title" href="#data-uri">Data URI</a>
      <a title="Link" class="anchor" href="#data-uri">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/images/cs/data-uri.html.md">✎</a>
    </div>

    <p>Tato technika je alternativou k používání CSS spritů.</p>
<p><a href="http://en.wikipedia.org/wiki/Data_URI_scheme">Data-URI</a> je způsob, jak inlinově vložit obsah namísto jeho odkazování pomocí URI, jak je to běžné. V tomto případě to použijeme k inlinovému vložení obrázku ve vlastnosti CSS background. Snížíme tak počet HTTP požadavků, které stránka potřebuje.</p>
<p>Předtím:</p>
<pre class="highlight"><code class="css"><span class="hljs-class">.icon-foo</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-image</span>:<span class="hljs-value"> <span class="hljs-function">url(<span class="hljs-string">'foo.png'</span>)</span></span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>Potom:</p>
<pre class="highlight"><code class="css"><span class="hljs-class">.icon-foo</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-image</span>:<span class="hljs-value"> <span class="hljs-function">url(<span class="hljs-string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII%3D'</span>)</span></span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>Všechny prohlížeče od IE8 a vyšší podporují techniku kódování pomocí base64.</p>
<p>Stejně tak jako CSS sprity, i tato metoda potřebuje nástroje, které činnost zautomatizují v okamžiku buildu. Tato metoda je výhodná v tom, že obrázky mohou být každý ve svém souboru a při vývoji tak nekomplikuje práci.</p>
<p>Naopak nevýhoda je ve značně narůstající velikosti HTML/CSS, jestliže máte velké obrázky. Využití metody se nedoporučuje, pokud nepoužíváte gzipování vašich HTML/CSS. Režie pro zakódování a vložení do stránky může negativně převážit zrychlení získané nižším počtem HTTP požadavků.</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#data-uri">Užitečné nástroje</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#data-uri">Reference</a></em></p>

  </div>



  <div class="article" id="article-scale">
    <h1 id="scale">
      <a class="tip-title" href="#scale">Neměňte velikost obrázků ve stránce</a>
      <a title="Link" class="anchor" href="#scale">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/images/cs/scale.html.md">✎</a>
    </div>

    <p>Vždy definujte atributy <code>width</code> a <code>height</code> obrázku. To zabrání zbytečnému překreslování stránky během renderování.</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">width</span>=<span class="hljs-value">"100"</span> <span class="hljs-attribute">height</span>=<span class="hljs-value">"100"</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"logo.jpg"</span> <span class="hljs-attribute">alt</span>=<span class="hljs-value">"Logo"</span>&gt;</span>
</code></pre>
<p>John Q. Developer to ví, a má obrázek o rozměrech <em>700x700px</em>. Rozhodne se proto tuto techniku použít pro zobrazení obrázku jako <em>50x50px</em>.</p>
<p>Mr. Developer si ale neuvědomuje, že jsou zcela zbytečně přenášeny desítky <em>kilobytů</em> navíc.</p>
<p>Vždy mějte na mysli: jen proto, že je možné definovat výšku a šířku obrázku, neznamená to, že byste tuto věc měli použít pro změnšení obrázků.</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#dont-rescale-images-in-markup">Reference</a></em></p>

  </div>



  <div class="article" id="article-optimize">
    <h1 id="optimize">
      <a class="tip-title" href="#optimize">Optimalizujte obrázky</a>
      <a title="Link" class="anchor" href="#optimize">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/images/cs/optimize.html.md">✎</a>
    </div>

    <p>Soubory obrázků obsahují spoustu informací, které jsou zbytečné na webu. Například JPEG fotka může obsahovat <em>Exif</em> metadata z foťáku (datum, typ foťáku, geolokace a pod.). PNG obsahuje informace o barvách, metadata a občas i vložený náhled obrázku. Nic z toho není používáno prohlížečem a zbytečně to nafukuje velikost souboru.</p>
<p>Existují nástroje pro optimalizaci obrázku, které odstraní nepotřebná data a výsledkem je menší soubor i bez ztráty kvality. Říkáme tomu <em>bezztrátová</em> komprese.</p>
<p>Další možnost, jak optimalizovat obrázky, je komprese na vrub vizuální kvality. Tomu říkáme <em>ztrátová</em> optimalizace. Například, když exportujete JPEG, můžete si zvolit úroveň kvality (číslo mezi 0 a 100). Když jde o výkon, vždy volte nejnižší možné číslo, které stále ještě zachová přijatelnou vizuální podobu. Další běžná ztrátová technika je zredukování barevné palety v PNG nebo konverze PNG-24 na PNG-8.</p>
<p>K vylepšení vjemového výkonu je vhodné převést všechny JPEG soubory na jejich progresivní varianty. Progresivní JPEGy mají skvělou podporu v prohlížečích, je snadné vytvořit je a nemají žádné výkonové nevýhody. Výhodou je, že se obrázek načte na stránce dříve (<a href="http://www.patrickmeenan.com/progressive/view.php?img=http://farm2.staticflickr.com/1434/1002257937_021cb46a33_o.jpg">viz demo</a>).</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#optimize-your-images">Užitečné nástroje</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#optimize-your-images">Reference</a></em></p>

  </div>




      <h2 id="server" class="topics"><span>Server</span></h2>



  <div class="article" id="article-keep-alive">
    <h1 id="keep-alive">
      <a class="tip-title" href="#keep-alive">keep-alive</a>
      <a title="Link" class="anchor" href="#keep-alive">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/server/cs/keep-alive.html.md">✎</a>
    </div>

    <p>Každý HTTP request potřebuje vytvořit &quot;TCP&quot; spojení, aby byla možná komunikace mezi klientem a serverem.</p>
<p>Vytvoření TCP spojení je nákladný a časově náročný proces (z důvodu &quot;trojcestného handshakingu&quot;). Je tedy velmi důležité opakovaně používat již vytvořené TCP spojení pro přenos dalších HTTP požadavků tím samým &quot;tunelem&quot;.</p>
<p>Toto nastavení je nazýváno keep-alive.</p>
<p>Konfigurace se liší podle použitého serveru. Například pro Apache můžete doplnit do <code>htaccess</code> tyto řádky:</p>
<pre class="highlight"><code class="apache"><span class="hljs-tag">&lt;IfModule mod_headers.c&gt;</span>
  <span class="hljs-keyword"><span class="hljs-common">Header</span></span> set Connection keep-alive
<span class="hljs-tag">&lt;/IfModule&gt;</span>
</code></pre><p><em>&gt; <a href="https://github.com/cleberdantas/browser-diet/wiki/References#wiki-keep-alive">Reference</a></em></p>

  </div>



  <div class="article" id="article-cache">
    <h1 id="cache">
      <a class="tip-title" href="#cache">Aktivujte chytré kešování</a>
      <a title="Link" class="anchor" href="#cache">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/server/cs/cache.html.md">✎</a>
    </div>

    <p>Nejlepší způsob, jak optimalizovat requesty z vaší stránky, je nedělat žádné requesty. A jedna z nejužitečnějších cest, jak se vyhnout nepotřebným requestům, je kešování v prohlížeči. Ve výchozím nastavení je ponecháno na prohlížeči, jak dlouho bude soubory kešovat. My ale můžeme nastavit přesnou dobu, po kterou budou soubory uchovány v keši.</p>
<div class="img-right">
  <img id="geek-15" class="icos-geek" src="http://browserdiet.com/en/assets/img/15.png" alt="Geek #15" width="141" height="275" />
</div>

<p>Konfigurace se nastavuje na serveru (a závisí na tom, jakou serverovou konfiguraci máte). V případě Apache, pro představu, můžete přidat následující konfiguraci do <code>.htaccess</code> souboru:</p>
<pre class="highlight"><code class="mel">ExpiresActive On
ExpiresByType <span class="hljs-keyword">image</span>/gif <span class="hljs-string">"access plus 6 months"</span>
ExpiresByType <span class="hljs-keyword">image</span>/jpeg <span class="hljs-string">"access plus 6 months"</span>
ExpiresByType <span class="hljs-keyword">image</span>/png <span class="hljs-string">"access plus 6 months"</span>
ExpiresByType <span class="hljs-keyword">text</span>/css <span class="hljs-string">"access plus 6 months"</span>
ExpiresByType <span class="hljs-keyword">text</span>/javascript <span class="hljs-string">"access plus 6 months"</span>
ExpiresByType application/javascript <span class="hljs-string">"access plus 6 months"</span>
</code></pre><p>Tyto instrukce kešují obrázky, CSS a JS po 6 měsíců&mdash;je doporučováno kešovat nejméně po dobu jednoho měsíce. Ostatní servery mohou být nastaveny obdobně.</p>
<p>Důležité je zapamatovat si, že jakmile je něco nakešováno, prohlížeč nebude víckrát soubor načítat. Pokud chceme změnit obsah souboru, nemusí se změna projevit tak, jak běžně očekáváme. Abychom zobrazili novou verzi, musíme změnit název souboru. Jedna z cest, jak toho dosáhnout, je přidání určité formy verzování nebo časového razítka do názvu souboru. Například místo <code>home.js</code> můžete použít <code>home-v1.js</code> a až bude potřeba aktualizace souboru, prostě se změní jméno na <code>home-v2.js</code>.</p>
<p>Další způsob, jak obejít kešování v případě potřeby změny souboru je použití GET parametru v URL: <code>home.js?v=1</code> a <code>home.js?v=2</code>. Tato metoda má ale nevýhody oproti změně názvu souboru. Některé proxy servery ingorují GET parametry, ale zohledňují kešování. V takovém případě pak nebude možné vynutit si znovunačtení obsahu souboru, když je třeba.</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#enable-smart-caching">Reference</a></em></p>

  </div>



  <div class="article" id="article-gzip">
    <h1 id="gzip">
      <a class="tip-title" href="#gzip">GZIP</a>
      <a title="Link" class="anchor" href="#gzip">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/server/cs/gzip.html.md">✎</a>
    </div>

    <p>Velké procento obsahu stránky je prostý text (HTML, CSS, JavaScript, JSON, XML, atd.). Pro tento typ obsahu je dobré zapnout GZIP kompresi na úrovni severu.</p>
<p>GZIP komprimuje data na serveru před tím, než jsou odeslána do uživatelova prohlížeče, který je za běhu dekóduje zpět. Je to stejný postup, jako zazipovat soubor před tím, než jej někomu odešlete takto zmenšený. Všechny moderní prohlížeče a servery podporují kompresi GZIP.</p>
<p>Konfigurace se nastavuje na serveru. V případě Apache, pro představu, můžete upravit <code>.htaccess</code> soubor a zapnout tak GZIP pro typy souborů, které chcete komprimovat:</p>
<pre class="highlight"><code class="applescript">AddOutputFilterByType DEFLATE <span class="hljs-type">text</span>/html
AddOutputFilterByType DEFLATE <span class="hljs-type">text</span>/plain
AddOutputFilterByType DEFLATE <span class="hljs-type">text</span>/xml
AddOutputFilterByType DEFLATE <span class="hljs-type">text</span>/css
AddOutputFilterByType DEFLATE <span class="hljs-type">application</span>/javascript
</code></pre><p>Všechny populární servery jsou obdobně snadno nastavitelné (v dokumentaci si dohledejte informace pro ten svůj!). Toto je jeden z nejefektivnějších tipů pro vylepšení výkonu stránek.</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#gzip">Reference</a></em></p>

  </div>




      <h2 id="bonus" class="topics"><span>Bonus</span></h2>



  <div class="article" id="article-tools">
    <h1 id="tools">
      <a class="tip-title" href="#tools">Diagnostické nástroje: váš nejlepší přítel</a>
      <a title="Link" class="anchor" href="#tools">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/bonus/cs/tools.html.md">✎</a>
    </div>

    <div class="img-left">
  <img id="geek-43" class="icos-geek" src="http://browserdiet.com/en/assets/img/43.png" alt="Geek #43" width="157" height="275" />
</div>

<p>Pokud chcete proniknout do světa optimalizací výkonu webu, je zásadní nainstalovat si <a href="http://yslow.org/">YSlow</a> a <a href="https://developers.google.com/speed/pagespeed/insights_extensions">PageSpeed</a> rozšíření do prohlížeče&mdash;to budou od teď vaši nejlepší přátelé.</p>
<p>Pokud preferujete online nástroje, navštivte <a href="http://www.webpagetest.org/">WebPageTest</a>, <a href="http://httparchive.org/">HTTP Archive</a>, nebo <a href="http://pagespeed.googlelabs.com/">PageSpeed</a>.</p>
<p>V zásadě každý nástroj analyzuje výkon stránky a vytvoří report, který stránku ohodnotí a přidá neocenitelné rady, které pomohou vyřešit případné problémy.</p>

  </div>



  <div class="article" id="article-bye">
    <h1 id="bye">
      <a class="tip-title" href="#bye">A to je pro dnešek vše!</a>
      <a title="Link" class="anchor" href="#bye">∞</a>
    </h1>

    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Editovat" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/bonus/cs/bye.html.md">✎</a>
    </div>

    <div class="img-right">
  <img id="geek-31" src="http://browserdiet.com/en/assets/img/31.png" alt="Geek #31" width="162" height="275" />
</div>

<p>Doufáme, že po přečtení této příručky dovedete dát vaše stránky do formy. :-)</p>
<p>A nezapomeňte, jak už to v životě chodí, <a href="http://www.cs.nott.ac.uk/~cah/G51ISS/Documents/NoSilverBullet.html">neexistuje nic takového, jako stříbrná kulka</a>. Ladění výkonu vaší aplikace je chvályhodný počin, neměl by být ale tím jediným, co při vývoji řešíte&mdash;celou dobu musíte zvažovat náklady a přidanou hodnotu.</p>
<p>Chcete se dozvědět více? Mrkněte na <a href="https://github.com/zenorocha/browser-diet/wiki/References">zdroje</a>, které jsme použili k napsání této příručky.</p>
<p>Máte tipy? Tweetněte je na <a href="http://twitter.com/browserdiet/">@BrowserDiet</a> nebo udělejte <a href="https://github.com/zenorocha/browser-diet">pull request</a> na Githubu.</p>
<p>Nezapomeňte se podělit se svými přáteli, pojďme vytvořit rychlejší weby pro všechny.</p>

  </div>




    </div>
  </div>

  <div id="footer">
    <div class="center">
      <p>Vytvořil <em>Zeno Rocha</em> ● Design <em>Briza Bueno</em> ● Grafika <em>Scott Johnson</em></p>
    </div>
  </div>

  <!-- <a title="Nahoru" id="top" href="#top-bar">
    <img src="http://zenorocha.github.io/browser-diet/en/assets/img/top.png" alt="Nahoru" width="64" height="64">
  </a> -->

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4114546-34']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</body>
</html>
