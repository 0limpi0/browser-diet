<p>El loop es sin duda una de las partes más importantes relacionadas con el rendimiento de JavaScript. Trata de optimizar la lógica dentro de un loop para que cada interacción sea hecha eficientemente.</p>
<p>Una forma de hacer esto es almacenar el tamaño de la array sobre la que iteraremos, para que no tenga que ser recalculada cada iteración.</p>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">1000</span>),
    len, i;

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) {
  <span class="hljs-comment">// Mal - arr.length necesita ser recalculada 1000 veces</span>
}

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, len = arr.length; i &lt; len; i++) {
  <span class="hljs-comment">// Bien - arr.length es calculada sólo una vez y entonces es almacenada</span>
}
</code></pre>
<p><em><a href="http://jsperf.com/browser-diet-cache-array-length/10/">&gt; Resultados en JSPerf</a></em></p>
<p><strong>&gt; Nota:</strong> <em>Pese a que los navegadores modernos automáticamente optimizan este proceso, sigue siendo una buena práctica para adaptarse a los navegadores antiguos que aún perduran.</em></p>
<p>En iteraciones sobre colecciones en HTML como una lista de nodos (<code>NodeList</code>) generada por ejemplo por <code>document.getElementsByTagName(&#39;a&#39;)</code> esto es particularmente crítico. Estas colecciones son consideradas <em>vivas</em>, es decir, son automáticamente actualizadas cuando hay cambios en el elemento que les pertenece.</p>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-keyword">var</span> links = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'a'</span>),
    len, i;

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; links.length; i++) {
  <span class="hljs-comment">// Mal - cada iteración la lista será recalculada para ver si hubo algún cambio</span>
}

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, len = links.length; i &lt; len; i++) {
  <span class="hljs-comment">// Bien - el tamaño de la lista es obtenido y almacenado, y entonces comparado cada iteración</span>
}

<span class="hljs-comment">// Terrible: ejemplo de loop infinito</span>
<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; links.length; i++) {
  <span class="hljs-built_in">document</span>.body.appendChild(<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'a'</span>));
  <span class="hljs-comment">// cada iteración la lista de links aumenta, haciendo quel loop nunca se termine</span>
  <span class="hljs-comment">// esto no pasaría si el tamaño fuera almacenado y usado como una condición</span>
}
</code></pre>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#cache-array-lengths">Referencias</a></em></p>
