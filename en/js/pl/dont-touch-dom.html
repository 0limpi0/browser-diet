<p>Za każdym razem, gdy niepotrzebnie odwołujesz się do drzewa DOM, umiera Panda.</p>
<p>Poważnie, przeglądanie elementów DOM jest kosztowne. Silniki JavaScriptu są coraz wydajniejsze i szybsze, ale zawsze lepsze jest ograniczenie odwołań do drzewa DOM.</p>
<p>Jednym z najprostszych sposobów optymalizacji jest przechowywanie często używanych elementów DOM. Na przykład, zamiast odpytywania DOM w każdej iteracji pętli, pytamy raz i przechowujemy wynik w zmiennej, dostępnej dla każdej iteracji.</p>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">// bardzo źle!</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"myList"</span>).innerHTML += <span class="hljs-string">"&lt;span&gt;"</span> + i + <span class="hljs-string">"&lt;/span&gt;"</span>;
}
</code></pre>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">// nieco lepiej :)</span>
<span class="hljs-keyword">var</span> myList = <span class="hljs-string">""</span>;

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
  myList += <span class="hljs-string">"&lt;span&gt;"</span> + i + <span class="hljs-string">"&lt;/span&gt;"</span>;
}

<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"myList"</span>).innerHTML = myList;
</code></pre>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">// dużo, *dużo* better :)</span>
<span class="hljs-keyword">var</span> myListHTML = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"myList"</span>).innerHTML;

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
  myListHTML += <span class="hljs-string">"&lt;span&gt;"</span> + i + <span class="hljs-string">"&lt;/span&gt;"</span>;
}
</code></pre>
<p><em>&gt; <a href="http://jsperf.com/browser-diet-dom-manipulation/11">Wuniki w JSPerf</a></em></p>
