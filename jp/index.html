<!doctype html>
<html lang="ja-JP" itemscope itemtype="http://schema.org/CreativeWork">
<head>

  <title>How to lose weight (in the browser)</title>

  <!-- Metatags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="決定的なフロントエンドのパフォーマンスガイド">
  <meta name="keywords" content="front-end, web performance, cache, compress, minify, combine">

  <!-- Schema.org -->
  <meta itemprop="name" content="How to lose weight (in the browser)">
  <meta itemprop="url" content="http://zenorocha.github.io/browser-diet">
  <meta itemprop="image" content="http://zenorocha.github.io/browser-diet/en/assets/img/share.jpg">
  <meta itemprop="description" content="決定的なフロントエンドのパフォーマンスガイド">

  <!-- Style -->
  <link rel="stylesheet" href="http://zenorocha.github.io/browser-diet/en/assets/css/all.min.css">

  <!-- Fonts -->
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans|Pacifico">

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="http://zenorocha.github.io/browser-diet/en/assets/img/favicon.ico">

</head>

<body class="jp">

  <div id="header">

    <div id="top-bar" class="subtitle">
      <div class="center">

        <div id="language-picker">
          <a href="/jp" class="flags" id="flag-jp">&nbsp;</a>

          <div class="available-languages">
            <a id="flag-en" class="flags" href="http://browserdiet.com/" title="English">English</a>
            <a id="flag-es" class="flags" href="http://browserdiet.com/es/" title="Español">Español</a>
            <a id="flag-pt" class="flags" href="http://browserdiet.com/pt/" title="Português">Português</a>
            <a id="flag-pl" class="flags" href="http://browserdiet.com/pl/" title="Polski">Polski</a>
            <a id="flag-zh" class="flags" href="http://browserdiet.com/zh/" title="中国的">中国的</a>
            <a id="flag-fr" class="flags" href="http://browserdiet.com/fr/" title="Français">Français</a>
            <a id="flag-cs" class="flags" href="http://browserdiet.com/cs/" title="Česky">česky</a>
            <a id="flag-jp" class="flags" href="http://browserdiet.com/jp/" title="日本語">日本語</a>
          </div>
        </div>

        <h3>決定的なフロントエンドのパフォーマンスガイド</h3>

      </div>
    </div>

    <a href="https://github.com/zenorocha/browser-diet"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>

    <div class="center">
      <div class="intro">
        <hgroup class="intro-titles">
          <h1>How to lose <span>weight</span></h1><h2>in the browser</h2>
        </hgroup>

        <div class="superman">
          <img class="superman-geek" src="http://zenorocha.github.io/browser-diet/en/assets/img/superman.png" alt="Superman">
          <img class="superman-rays" src="http://zenorocha.github.io/browser-diet/en/assets/img/rays.png" alt="">
        </div>
      </div>

    </div>

    <div id="menu">
      <ul class="center">
        <li><a href="#html">HTML</a></li>
        <li><a href="#css">CSS</a></li>
        <li><a href="#js">JavaScript</a></li>
        <li><a href="#jquery">jQuery</a></li>
        <li><a href="#images">Images</a></li>
        <li><a href="#bonus">Bonus</a></li>
      </ul>
    </div>

  </div>

  <div id="content">
    <div class="center">

      
    <div class="article">
      <div class="img-left">
  <img id="geek-17" class="icos-geek" src="http://browserdiet.com/en/assets/img/17.png" alt="Geek #17" width="199" height="275" />
</div>

<p>決定的なフロントエンドのパフォーマンスガイドを作成するのに、大規模サイトの開発をしている熟練者たちを集められたらどうでしょう？</p>
<p>ロボット向けに作られた退屈なガイドとは違って、何か面白いものを作ったらどうでしょう？
最高のリファレンスを作ることを可能にするために、<a href="http://www.brizabueno.com/">Briza Bueno</a> <em>(Americanas.com)</em>、 <a href="https://github.com/davidsonfellipe">Davidson Fellipe</a> <em>(Globo.com)</em>、 <a href="https://github.com/keppelen">Giovanni Keppelen</a> <em>(ex-Peixe Urbano)</em>、 <a href="https://github.com/jaydson">Jaydson Gomes</a> <em>(Terra)</em>、 <a href="https://github.com/marcelduran">Marcel Duran</a> <em>(Twitter)</em>、 <a href="https://github.com/miketaylr">Mike Taylor</a> <em>(Opera)</em>、 <a href="https://github.com/mangini">Renato Mangini</a> <em>(Google)</em>、 <a href="http://sergiolopes.org">Sérgio Lopes</a> <em>(Caelum)</em> とともにやっていくのはどうでしょう？</p>
<p>それこそまさに私たちがやってきたことです！そして私たちはより高速なサイトを作る戦いへ案内します。</p>
<p class="project-leader">&mdash; <a href="http://zenorocha.com/">Zeno Rocha</a>、プロジェクトリーダー。</p>
    </div>

    <div class="article">
      <h1 id="performance-matters">
  <a class="tip-title" href="#performance-matters">パフォーマンスが本当に重要でしょうか？</a>
  <a title="Link" class="anchor" href="#performance-matters">∞</a>
</h1>

<div class="line">
  <span class="order">??</span>
  <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/intro/jp/performance-matters.html">✎</a>
</div>

<p>もちろんあなたも知っているように重要です。 では、なぜ私たちは酷いユーザーエクスペリエンスへとつながる遅いサイトを作り続けるのでしょうか？ これはより高速なサイトの作り方を見せるコミュニティ駆動型の実践的なガイドです。 <a href="https://github.com/zenorocha/browser-diet/wiki/Impact-of-performance">億万長者のパフォーマンスの事例</a>を見て時間を浪費するのを止めて、本題に入りましょう！</p>
    </div>


      <h2 id="html" class="topics"><span>HTML</span></h2>



  <div class="article" id="article-avoid-inline">
    <h1 id="avoid-inline">
      <a class="tip-title" href="#avoid-inline">インライン/埋め込みのコードを避ける</a>
      <a title="Link" class="anchor" href="#avoid-inline">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/html/jp/avoid-inline.html.md">✎</a>
    </div>
    
    <p>ページにCSSかJavaScriptを読み込むには３通りの方法があります。</p>
<p><strong>1) インライン:</strong> どのHTMLタグでも、CSSは<code>style</code>属性で定義され、JavaScriptは例として<code>onclick</code>属性に記述されます;</p>
<p><strong>2) 埋め込み:</strong> CSSは<code>&lt;style&gt;</code>の中で定義され、JavaScriptは<code>&lt;script&gt;</code>タグの中で定義されます;</p>
<p><strong>3) 外部ファイル:</strong> CSSは<code>&lt;link&gt;</code>から読み込まれ、JavaScriptは<code>&lt;script&gt;</code>タグの<code>src</code>属性から読み込まれます。</p>
<p>最初の2つの方法は、HTTPリクエストの数を減少する一方で、HTMLドキュメントのサイズを増大します。 ですがこれは、あなたが小さなアセットしか持たないけれども、リクエストのコストがより大きい場合に有用です。 この場合には、実際にスピード面で効果があるかを評価するテストをしましょう。 また、あなたのページとそのユーザーの目的を評価しましょう: もし、訪問者が二度と戻らないと想定される期間限定のキャンペーンのように、一度だけユーザーが訪れることを想定するなら、インライン/埋め込みのコードはHTTPリクエストの数を減少させる助けになるでしょう。</p>
<p><em>&gt; HTMLの中で手作業でCSS/JSを編集するのは避けましょう（ツールを用いてこの行程を自動化することが望ましいです）。</em></p>
<p>3つ目の方法は、あなたのコードの構成を改善するだけでなく、ブラウザにキャッシュさせることも可能になります。この方法は、ほとんどの場合に望ましい方法であり、大きなファイルや大量のページを扱うときには特に望ましいです。</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#wiki-avoid-inlineembedded-code">有用なツール</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#avoid-inlineembedded-code">リファレンス</a></em></p>

  </div>



  <div class="article" id="article-css-on-top-js-on-bottom">
    <h1 id="css-on-top-js-on-bottom">
      <a class="tip-title" href="#css-on-top-js-on-bottom">styleは上へ、scriptは下へ</a>
      <a title="Link" class="anchor" href="#css-on-top-js-on-bottom">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/html/jp/css-on-top-js-on-bottom.html.md">✎</a>
    </div>
    
    <p>スタイルシートを<code>&lt;head&gt;</code>の中に置くとき、ページを徐々にレンダリングすることが許容され、ユーザーに対してページが高速に読み込まれている印象を与えます。</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Browser Diet<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- CSS --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"style.css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
</code></pre>
<p>もしページの最後にそれらを置いた場合、ページはCSSがダウンロードされて適応されるまでの間スタイルなしでレンダリングされます。</p>
<div class="img-right">
  <img id="geek-32" class="icos-geek" src="http://browserdiet.com/en/assets/img/32.png" alt="Geek #32" width="139" height="275" />
</div>

<p>一方で、JavaScriptについては、scriptが読み込まれて実行される間にレンダリングをブロックするので、ページの最後に配置することが重要です。</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- JS --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"script.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
</code></pre>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#styles-up-top-scripts-down-bottom">リファレンス</a></em></p>

  </div>



  <div class="article" id="article-async">
    <h1 id="async">
      <a class="tip-title" href="#async">asyncを試みる</a>
      <a title="Link" class="anchor" href="#async">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/html/jp/async.html.md">✎</a>
    </div>
    
    <p>この属性が、よりよいパフォーマンスのために有用であることを説明するには、これを使わないときに何が起きるかを理解した方がいいでしょう。</p>
<div class="img-left">
  <img id="geek-20" class="icos-geek" src="http://browserdiet.com/en/assets/img/20.png" alt="Geek #20" width="118" height="275" />
</div>

<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"example.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>この形式だとページは、それ以降のHTMLの解析とレンダリングをする前にscriptが完全にダウンロード、解析、実行されるのを待つ必要があります。 これはロード時間を大幅に増やすことになります。 時にはこの振る舞いが望ましいことがあるかもしれませんが、一般的には違います。</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">async</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"example.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>scriptは、ページの残りの部分を解析している間に非同期でダウンロードされます。 scriptはダウンロードが完了したらすぐに実行されることが保証されます。</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#try-out-async">リファレンス</a></em></p>

  </div>




      <h2 id="css" class="topics"><span>CSS</span></h2>



  <div class="article" id="article-minify-css">
    <h1 id="minify-css">
      <a class="tip-title" href="#minify-css">スタイルシートをミニファイ</a>
      <a title="Link" class="anchor" href="#minify-css">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/css/jp/minify-css.html.md">✎</a>
    </div>
    
    <p>可読性の高いコードを保つためには、コメントやインデントは良いアイディアです。</p>
<pre class="highlight"><code class="css"><span class="hljs-class">.center</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">960</span>px</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"> <span class="hljs-number">0</span> auto</span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-comment">/* --- Structure --- */</span>

<span class="hljs-class">.intro</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"> <span class="hljs-number">100</span>px</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">position</span>:<span class="hljs-value"> relative</span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>ですがブラウザにとってはそれは重要ではありません。従って、自動化ツールを使ってCSSをミニファイすることを常に覚えておいてください。</p>
<pre class="highlight"><code class="css"><span class="hljs-class">.center</span><span class="hljs-rules">{<span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"><span class="hljs-number">960</span>px</span></span>;<span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"><span class="hljs-number">0</span> auto</span></span></span>}<span class="hljs-class">.intro</span><span class="hljs-rules">{<span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"><span class="hljs-number">100</span>px</span></span>;<span class="hljs-rule"><span class="hljs-attribute">position</span>:<span class="hljs-value">relative</span></span></span>}
</code></pre>
<p>それがファイルサイズを削ることになり、高速なダウンロード、解析、実行へとつながります。</p>
<p><a href="http://sass-lang.com/">Sass</a>や <a href="http://lesscss.org/">Less</a>、<a href="http://learnboost.github.com/stylus/">Stylus</a>のようなプリプロセッサーを利用することで、ミニファイされたCSSをコンパイル時に出力するように設定することが出来ます。</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#wiki-minify-your-stylesheets">有用なツール</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#minify-your-stylesheets">リファレンス</a></em></p>

  </div>



  <div class="article" id="article-combine-css">
    <h1 id="combine-css">
      <a class="tip-title" href="#combine-css">複数のCSSファイルの結合</a>
      <a title="Link" class="anchor" href="#combine-css">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/css/jp/combine-css.html.md">✎</a>
    </div>
    
    <p>styleの構成とメンテナンスのための別のベストプラクティスは、モジュールの構成要素に分割することです。</p>
<div class="img-right">
  <img id="geek-9" class="icos-geek" src="http://browserdiet.com/en/assets/img/9.png" alt="Geek #9" width="122" height="275" />
</div>

<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"structure.css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"banner.css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"layout.css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"component.css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"plugin.css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span>&gt;</span>
</code></pre>
<p>ですが、これらのファイル毎にHTTPリクエストが必要になります（そして私たちはブラウザが並列で限られた数のリソースのみをダウンロードすることを知っています）。</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"main.css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span>&gt;</span>
</code></pre>
<p>なのでCSSを結合しましょう。少数のファイルで構成することはリクエストの数を少なくすることになり、より高速にページを読み込みます。</p>
<p>いずれの長所も欲しい場合はどうでしょう？ ビルドツールを使ってこのプロセスを自動化しましょう。</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#wiki-combining-multiple-css-files">有用なツール</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#combining-multiple-css-files">リファレンス</a></em></p>

  </div>



  <div class="article" id="article-prefer-link-over-import">
    <h1 id="prefer-link-over-import">
      <a class="tip-title" href="#prefer-link-over-import">@importよりも&lt;link&gt;</a>
      <a title="Link" class="anchor" href="#prefer-link-over-import">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/css/jp/prefer-link-over-import.html.md">✎</a>
    </div>
    
    <p>ページに外部ファイルのスタイルシートを読み込む方法は2つあります: 一方は<code>&lt;link&gt;</code>タグ:</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"style.css"</span>&gt;</span>
</code></pre>
<p>または<code>@import</code>です（外部のスタイルシートか<code>&lt;style&gt;</code>タグの中で）。</p>
<pre class="highlight"><code class="css"><span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-function">url(<span class="hljs-string">'style.css'</span>)</span></span>;
</code></pre>
<p>外部ファイルで2番目の方法を用いると、ほかのアセットのダウンロードをブロックすることになり、ブラウザは並列でアセットをダウンロードすることができません。</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#prefer--over-import">リファレンス</a></em></p>

  </div>




      <h2 id="js" class="topics"><span>JavaScript</span></h2>



  <div class="article" id="article-3rd-party-async">
    <h1 id="3rd-party-async">
      <a class="tip-title" href="#3rd-party-async">サードパーティのコンテンツの非同期読み込み</a>
      <a title="Link" class="anchor" href="#3rd-party-async">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/js/jp/3rd-party-async.html.md">✎</a>
    </div>
    
    <p>Youtubeのビデオやlike/tweetボタンを埋め込むためのサードパーティのコンテンツを読み込んだことがない人がいますか？</p>
<div class="img-right">
  <img id="geek-46" class="icos-geek" src="http://browserdiet.com/en/assets/img/46.png" alt="Geek #46" width="158" height="275" />
</div>

<p>これらのコードの大きな問題は、ユーザーの接続環境かホスティングされているサーバーの接続状態によって、常に効果的に配信される訳ではないということです。また、サービスが一時的にダウンしていたり、ユーザーかユーザーの会社のファイアウォールによってブロックされていることさえ有り得ます。</p>
<p>これがページの読み込み時に大きな問題とならないように、ページ全体の読み込みをロックするには、常にこれらのコードを非同期で読み込みましょう(もしくは <em><a href="https://www.facebook.com/note.php?note_id=10151176218703920">Friendly iFrames</a></em> を使いましょう)。</p>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> script = document.createElement(<span class="hljs-string">'script'</span>),
    scripts = document.getElementsByTagName(<span class="hljs-string">'script'</span>)[<span class="hljs-number">0</span>];
script.async = <span class="hljs-literal">true</span>;
script.src = url;
scripts.parentNode.insertBefore(script, scripts);
</code></pre>
<p>あるいは、複数のサードパーティウィジェットの読み込みたい場合、<a href="https://gist.github.com/zenorocha/5161860">このscript</a>を用いて非同期で読み込ませることができます。</p>
<p><em>&gt; <a href="http://www.webpagetest.org/video/view.php?id=111011_4e0708d3caa23b21a798cc01d0fdb7882a735a7d">動画</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#load-3rd-party-content-asynchronously">リファレンス</a></em></p>

  </div>



  <div class="article" id="article-cache-array-lengths">
    <h1 id="cache-array-lengths">
      <a class="tip-title" href="#cache-array-lengths">配列の長さをキャッシュする</a>
      <a title="Link" class="anchor" href="#cache-array-lengths">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/js/jp/cache-array-lengths.html.md">✎</a>
    </div>
    
    <p>ループは確実にJavaScriptのパフォーマンスに関する最も重要な部分の1つです。反復処理が効果的に行われるようにループの内部のロジックを最適化しましょう。</p>
<p>1つの手段は、包まれる配列のサイズを保持しておくことで、それによってループが繰り返される度に再度計算する必要がなくなります。</p>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">1000</span>),
    len, i;

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) {
  <span class="hljs-comment">// 良くない - サイズは1000回計算される必要があります</span>
}

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, len = arr.length; i &lt; len; i++) {
  <span class="hljs-comment">// 良い - サイズは1度だけ計算されて保持されます</span>
}
</code></pre>
<p><em><a href="http://jsperf.com/browser-diet-cache-array-length/10/">&gt; JSPerfの結果</a></em></p>
<p><strong>&gt; 注:</strong> <em>モダンブラウザのエンジンは自動的にこのプロセスを最適化しますが、未だに残るレガシーブラウザ向けの良いプラクティスとして残しています。</em></p>
<p>例えば<code>document.getElementsByTagName(&#39;a&#39;)</code>によって生成されたNode（<em>NodeList</em>）のリストのようなHTMLの集合に対する反復処理の場合に、これはとりわけ重要です。これらの集合は&quot;生きている&quot;と見なされます。即ち、それらはその属する要素の変化に応じて自動的に更新されるのです。</p>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> links = document.getElementsByTagName(<span class="hljs-string">'a'</span>),
    len, i;

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; links.length; i++) {
  <span class="hljs-comment">// 良くない - リンクのリストに変化があるかを確認するため反復処理毎に再計算されます</span>
}

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, len = links.length; i &lt; len; i++) {
  <span class="hljs-comment">// 良い - リストのサイズを最初に取得して保存し、反復毎に比較します</span>
}

<span class="hljs-comment">// 恐ろしい: 無限ループの例</span>
<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; links.length; i++) {
  document.body.appendChild(document.createElement(<span class="hljs-string">'a'</span>));
  <span class="hljs-comment">// リンクのリストが増加する反復処理毎に、ループの終了条件が満たされることがありません</span>
  <span class="hljs-comment">// リストのサイズが保持され条件として使われる場合には起きないことです</span>
}
</code></pre>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#cache-array-lengths">リファレンス</a></em></p>

  </div>



  <div class="article" id="article-documentwrite">
    <h1 id="documentwrite">
      <a class="tip-title" href="#documentwrite">document.writeを避ける</a>
      <a title="Link" class="anchor" href="#documentwrite">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/js/jp/documentwrite.html.md">✎</a>
    </div>
    
    <p><code>document.write</code>を使用することは、ページが完全に読み込まれるその戻りでページへの依存を引き起こします。</p>
<p>この（悪い）プラクティスは開発者たちによって長年にわたって使用されなくなりましたが、幾つかのJavaScriptファイルのための同期フォールバックとして、必要なケースで未だに利用されています。</p>
<p>例えば、<a href="https://github.com/h5bp/html5-boilerplate/">HTML5 Boilerplate</a>では、Googleの<em>CDN</em>が応答しない場合にローカルのjQueryを読み込むテクニックとして使っています。</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">window.jQuery || document.write(<span class="hljs-string">'&lt;script src="js/vendor/jquery-1.9.0.min.js"&gt;&lt;\/script&gt;'</span>)</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p><strong>&gt; 注:</strong> <em><code>window.onload</code>の間か後に<code>document.write</code>を実行するのはページの全コンテンツを置き換えます。</em></p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">span</span>&gt;</span>foo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
  window.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    document.write(<span class="hljs-string">'&lt;span&gt;bar&lt;/span&gt;'</span>);
  };
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>ページの結果は予想している<em>foobar</em>ではなく<em>bar</em>だけです。<code>window.onload</code>イベントの後に実行されたときも同様です。</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">span</span>&gt;</span>foo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
  setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    document.write(<span class="hljs-string">'&lt;span&gt;bar&lt;/span&gt;'</span>);
  }, <span class="hljs-number">1000</span>);
  window.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-comment">// ...</span>
  };
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>予定された<code>setTimeout</code>が<code>window.onload</code>イベントの後に実行される場合でも、結果は前述の例と同じになります。</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#avoid-documentwrite">リファレンス</a></em></p>

  </div>



  <div class="article" id="article-repaints-and-reflows">
    <h1 id="repaints-and-reflows">
      <a class="tip-title" href="#repaints-and-reflows">再描画と再フローを最少化</a>
      <a title="Link" class="anchor" href="#repaints-and-reflows">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/js/jp/repaints-and-reflows.html.md">✎</a>
    </div>
    
    <p>再描画と再フローは、あるプロパティか要素が変更された時に、再度レンダリングされるプロセスで引き起こされます。</p>
<p>再描画は、そのレイアウトが変更されることなく見た目上の変更があるときに起きます。 Nicole Sullivanは、<code>background-color</code>を変更するようなスタイルの変更としてこれを説明しています。</p>
<p>再フローは、要素のwidthの変更のような、ページのレイアウトの変更によって引き起こされるので最も高コストです。</p>
<p>過度の再描画と再フローを避けるべきであることは明白ですので、このようにする代わりに:</p>
<div class="img-right">
  <img id="geek-55" class="icos-geek" src="http://browserdiet.com/en/assets/img/55.png" alt="Geek #55" width="163" height="275" />
</div>

<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> div = document.getElementById(<span class="hljs-string">"to-measure"</span>),
    lis = document.getElementsByTagName(<span class="hljs-string">'li'</span>),
    i, len;

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, len = lis.length; i &lt; len; i++) {
  lis[i].style.width = div.offsetWidth + <span class="hljs-string">'px'</span>;
}
</code></pre>
<p>こうすべきです:</p>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> div = document.getElementById(<span class="hljs-string">"to-measure"</span>),
    lis = document.getElementsByTagName(<span class="hljs-string">'li'</span>),
    widthToSet = div.offsetWidth,
    i, len;

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, len = lis.length; i &lt; len; i++) {
  lis[i].style.width = widthToSet + <span class="hljs-string">'px'</span>;
}
</code></pre>
<p><code>style.width</code>を設定する場合、ブラウザはレイアウトを再計算する必要があります。ブラウザは画面を更新する必要があるまで再描画を考える必要がないので、大抵多くの要素のスタイルを変更することは、一度の再描画ですみます。</p>
<p>もしページのレイアウトのデータを読み取る必要があるなら、2つ目の例のようにレイアウトに変更を加える何かを設定する前に、全てを行なっておきましょう。</p>
<p><em>&gt; <a href="http://jsbin.com/aqavin/2/quiet">デモ</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#minimize-repaints-and-reflows">リファレンス</a></em></p>

  </div>



  <div class="article" id="article-dont-touch-dom">
    <h1 id="dont-touch-dom">
      <a class="tip-title" href="#dont-touch-dom">不要なDOM操作を避ける</a>
      <a title="Link" class="anchor" href="#dont-touch-dom">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/js/jp/dont-touch-dom.html.md">✎</a>
    </div>
    
    <p>必要がないのにDOMを操作する度、パンダは死にます。</p>
<p>冗談抜きに、DOM要素のブラウジングは高コストです。JavaScriptのエンジンは強力に高速になってきってはいますが、常にDOMツリーのクエリーを最適化した方がよいでしょう。</p>
<p>最も簡単な最適化の1つは、頻繁にアクセスされるDOM要素のキャッシングです。 例えば、ループの反復処理毎にDOMの検索をする代わりに、一度だけ検索してその結果を変数に保持し、その変数をループの反復処理毎に使いましょう。</p>
<pre class="highlight"><code class="javascript"><span class="hljs-comment">// 本当に良くないです！</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
  document.getElementById(<span class="hljs-string">"myList"</span>).innerHTML += <span class="hljs-string">"&lt;span&gt;"</span> + i + <span class="hljs-string">"&lt;/span&gt;"</span>;
}
</code></pre>
<pre class="highlight"><code class="javascript"><span class="hljs-comment">// ずっといいです :)</span>
<span class="hljs-keyword">var</span> myList = <span class="hljs-string">""</span>;

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
  myList += <span class="hljs-string">"&lt;span&gt;"</span> + i + <span class="hljs-string">"&lt;/span&gt;"</span>;
}

document.getElementById(<span class="hljs-string">"myList"</span>).innerHTML = myList;
</code></pre>
<pre class="highlight"><code class="javascript"><span class="hljs-comment">// ずっとずっといいです :)</span>
<span class="hljs-keyword">var</span> myListHTML = document.getElementById(<span class="hljs-string">"myList"</span>).innerHTML;

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
  myListHTML += <span class="hljs-string">"&lt;span&gt;"</span> + i + <span class="hljs-string">"&lt;/span&gt;"</span>;
}
</code></pre>
<p><em>&gt; <a href="http://jsperf.com/browser-diet-dom-manipulation/11">JSPerfの結果</a></em></p>

  </div>



  <div class="article" id="article-minify-js">
    <h1 id="minify-js">
      <a class="tip-title" href="#minify-js">scriptのミニファイ</a>
      <a title="Link" class="anchor" href="#minify-js">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/js/jp/minify-js.html.md">✎</a>
    </div>
    
    <p>CSSのように、可読性の高いコードを保つためには、コメントやインデントは良いアイディアです。</p>
<pre class="highlight"><code class="javascript">BrowserDiet.app = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

  <span class="hljs-keyword">var</span> foo = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">return</span> {
    bar: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-comment">// do something</span>
    }
  };

};
</code></pre>
<p>ですがブラウザにとってはそれは重要ではありません。従って、自動化ツールを使ってJavaScriptをミニファイすることを常に覚えておいてください。</p>
<pre class="highlight"><code class="javascript">BrowserDiet.app=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span><span class="hljs-keyword">var</span> a=!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>{bar:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>}}}
</code></pre>
<p>それがファイルサイズを削ることになり、高速なダウンロード、解析、実行へとつながります。</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#wiki-minify-your-script">有用なツール</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#minify-your-script">リファレンス</a></em></p>

  </div>



  <div class="article" id="article-combine-js">
    <h1 id="combine-js">
      <a class="tip-title" href="#combine-js">複数のJSファイルを1つに結合する</a>
      <a title="Link" class="anchor" href="#combine-js">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/js/jp/combine-js.html.md">✎</a>
    </div>
    
    <p>scriptの構成とメンテナンスのための別のベストプラクティスは、モジュールの構成要素に分割することです。</p>
<div class="img-right">
  <img id="geek-47" class="icos-geek" src="http://browserdiet.com/en/assets/img/47.png" alt="Geek #47" width="174" height="275" />
</div>

<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"navbar.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"component.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"page.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"framework.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"plugin.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>ですが、これらのファイル毎にHTTPリクエストが必要になります（そして私たちはブラウザが並列で限られた数のリソースのみをダウンロードすることを知っています）。</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"main.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>なのでJSを結合しましょう。少数のファイルで構成することはリクエスト数を少なくすることになり、より高速にページを読み込みます。</p>
<p>いずれの長所も欲しい場合ばどうでしょう？ ビルドツールを使ってこのプロセスを自動化しましょう。</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#wiki-combine-multiple-js-files-into-one">有用なツール</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#combine-multiple-js-files-into-one">リファレンス</a></em></p>

  </div>




      <h2 id="jquery" class="topics"><span>jQuery</span></h2>



  <div class="article" id="article-latest-version">
    <h1 id="latest-version">
      <a class="tip-title" href="#latest-version">常に最新のバージョンのjQueryを使用する</a>
      <a title="Link" class="anchor" href="#latest-version">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/jquery/jp/latest-version.html.md">✎</a>
    </div>
    
    <p>jQueryの開発チームは、より良い可読性、新たな機能と既存アルゴリズムの最適化などを通じて、常にライブラリの改善をもたらしています。</p>
<div class="img-right">
  <img id="geek-36" class="icos-geek" src="http://browserdiet.com/en/assets/img/36.png" alt="Geek #36" width="144" height="275" />
</div>

<p>このため、以下URLからコピーして利用できる最新バージョンのjQueryを常に利用しましょう。:</p>
<pre class="highlight"><code class="xml">http://code.jquery.com/jquery-latest.js
</code></pre>
<p>ですが、テストをする機会を持てずに新しいバージョンが自動的にあなたのサイトに配信される問題が生じるので、<em>決して</em><code>&lt;script&gt;</code>タグでこのURLを参照してはいけません。 代わりに、あなたが特に必要としているjQueryの最新バージョンにリンクしましょう。</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>賢明な<a href="/img/new-is-always-better.gif">Barney Stinson</a>が言ったように、<em>&quot;新しいものは常に優れている&quot;</em> :P。</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#always-use-the-latest-version-of-jquery">リファレンス</a></em></p>

  </div>



  <div class="article" id="article-selectors">
    <h1 id="selectors">
      <a class="tip-title" href="#selectors">セレクター</a>
      <a title="Link" class="anchor" href="#selectors">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/jquery/jp/selectors.html.md">✎</a>
    </div>
    
    <p>セレクターはjQueryの使用上最も重要な問題の1つです。 DOMから要素を選択するにはclassやIDを利用したり<code>find()</code>や<code>children()</code>のようなメソッドを用いるなど、多様な方法がありますが、それらが同様のパフォーマンスであることを意味している訳ではありません。</p>
<p>それら全ての中で、IDを選択することがネイティブのDOM操作に基づくので最速となります。</p>
<pre class="highlight"><code class="javascript">$(<span class="hljs-string">"#foo"</span>);
</code></pre>
<p><em><a href="http://jsperf.com/browser-diet-jquery-selectors">&gt; JSPerfの結果</a></em></p>

  </div>



  <div class="article" id="article-use-for-instead-of-each">
    <h1 id="use-for-instead-of-each">
      <a class="tip-title" href="#use-for-instead-of-each">eachの代わりにforを使用する</a>
      <a title="Link" class="anchor" href="#use-for-instead-of-each">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/jquery/jp/use-for-instead-of-each.html.md">✎</a>
    </div>
    
    <p>生のJavaScriptの機能はほぼ常にjQueryのそれよりも高速です。そのため、<code>jQuery.each</code>を使用する代わりにJavaScriptの<code>for</code>ループを使用しましょう。</p>
<p>ですが注意してほしいのは、<code>for in</code>はネイティブですが、ほとんどのケースで<code>jQuery.each</code>よりも性能が低いです。</p>
<p>そしてよくテストされた<code>for</code>ループは、反復処理において集合の長さをキャッシュしておくことでパフォーマンスより良くする機会を与えてくれます。</p>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = a.length; i &lt; len; i++ ) {
    e = a[i];
}
</code></pre>
<p>反対の<code>while</code>や<code>for</code>ループはコミュニティにおいてホットなトピックで、反復処理の最速な形式として頻繁に引用されます。 ですが、可読性の低下を理由に一般的には使用されません。</p>
<pre class="highlight"><code class="javascript"><span class="hljs-comment">// reverse while</span>
<span class="hljs-keyword">while</span> ( i-- ) {
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// reverse for</span>
<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = array.length; i--; ) {
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><em>&gt; <a href="http://jsperf.com/browser-diet-jquery-each-vs-for-loop">JSPerfの結果</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#use-for-instead-of-each">References</a></em></p>

  </div>



  <div class="article" id="article-dont-use-jquery">
    <h1 id="dont-use-jquery">
      <a class="tip-title" href="#dont-use-jquery">jQueryを常に使用しない・・・</a>
      <a title="Link" class="anchor" href="#dont-use-jquery">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/jquery/jp/dont-use-jquery.html.md">✎</a>
    </div>
    
    <p>時に生のJavaScriptはjQueryよりも容易でより高性能です。</p>
<div class="img-right">
  <img id="geek-6" class="icos-geek" src="http://browserdiet.com/en/assets/img/6.png" alt="Geek #6" width="156" height="275" />
</div>

<p>以下のようなHTMLがあったとして:</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"text"</span>&gt;</span>Let's change this content<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<p>このようにする代わりに:</p>
<pre class="highlight"><code class="javascript">$(<span class="hljs-string">'#text'</span>).html(<span class="hljs-string">'The content has changed'</span>).css({
  backgroundColor: <span class="hljs-string">'red'</span>,
  color: <span class="hljs-string">'yellow'</span>
});
</code></pre>
<p>生のJavaScriptを使用しましょう:</p>
<pre class="highlight"><code class="javascript"><span class="hljs-keyword">var</span> text = document.getElementById(<span class="hljs-string">'text'</span>);
text.innerHTML = <span class="hljs-string">'The content has changed'</span>;
text.style.backgroundColor = <span class="hljs-string">'red'</span>;
text.style.color = <span class="hljs-string">'yellow'</span>;
</code></pre>
<p>この方がシンプルで <strong>より</strong>高速です。</p>
<p><em>&gt; <a href="http://jsperf.com/jquery-vs-javascript-performance-text">JSPerfの結果</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#dont-use-jquery">リファレンス</a></em></p>

  </div>




      <h2 id="images" class="topics"><span>Images</span></h2>



  <div class="article" id="article-sprites">
    <h1 id="sprites">
      <a class="tip-title" href="#sprites">CSSスプライトを使用する</a>
      <a title="Link" class="anchor" href="#sprites">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/images/jp/sprites.html.md">✎</a>
    </div>
    
    <p>このテクニックは多様な画像を全て1つのファイルにグルーピングします。</p>
<p><img id="img-sprite" src="http://browserdiet.com/en/assets/img/sprite-example.jpg" alt="CSS Sprite Example"></p>
<p>そしてCSSでそれらを配置します。</p>
<pre class="highlight"><code class="css"><span class="hljs-class">.icon-foo</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-image</span>:<span class="hljs-value"> <span class="hljs-function">url(<span class="hljs-string">'mySprite.png'</span>)</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">background-position</span>:<span class="hljs-value"> -<span class="hljs-number">10</span>px -<span class="hljs-number">10</span>px</span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-class">.icon-bar</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-image</span>:<span class="hljs-value"> <span class="hljs-function">url(<span class="hljs-string">'mySprite.png'</span>)</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">background-position</span>:<span class="hljs-value"> -<span class="hljs-number">5</span>px -<span class="hljs-number">5</span>px</span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>結果的に、あなたは劇的にHTTPリクエストの数を減少させ、ページの他のリソースの滞在的な遅れを避けることになります。</p>
<p><em>スプライト</em>を使うとき、あまりに多くの画像間の空白を残すことは避けましょう。ファイルサイズへの影響はありませんが、メモリーの消費量に影響があります。</p>
<p>ほぼ全ての開発者がスプライトについて知っているのに反して、このテクニックは広く使われていません&mdash;おそらくスプライトを生成するのに自動化ツールを使用していないからでしょう。このことに関してはあなたを助ける幾つかを強調してきました。</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#wiki-use-css-sprites">有用なツール</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#use-css-sprites">リファレンス</a></em></p>

  </div>



  <div class="article" id="article-data-uri">
    <h1 id="data-uri">
      <a class="tip-title" href="#data-uri">Data URI</a>
      <a title="Link" class="anchor" href="#data-uri">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/images/jp/data-uri.html.md">✎</a>
    </div>
    
    <p>このテクニックはCSSスプライトの代わりになります。</p>
<p><a href="http://en.wikipedia.org/wiki/Data_URI_scheme">Data-URI</a>は、通常はURIのコンテンツのインライン化を目的とする方法です。 この例では、私たちはページの読み込みで必要となるHTTPリクエストを削減するためにCSSのbackground imageのコンテンツをインライン化するのに使っています。</p>
<p>Before:</p>
<pre class="highlight"><code class="css"><span class="hljs-class">.icon-foo</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-image</span>:<span class="hljs-value"> <span class="hljs-function">url(<span class="hljs-string">'foo.png'</span>)</span></span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>After:</p>
<pre class="highlight"><code class="css"><span class="hljs-class">.icon-foo</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">background-image</span>:<span class="hljs-value"> <span class="hljs-function">url(<span class="hljs-string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII%3D'</span>)</span></span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>IE8以上の全てのブラウザはbase64エンコードがサポートされています。</p>
<p>この方法とCSSスプライトのいずれもがメンテナンスしていくのにビルドツールを必要とします。この方法は、開発中に個別のファイルで画像を維持するのに手動でのスプライトの配置を不要とするアドバンテージがあります。</p>
<p>ですが、大きな画像を持っていた場合にはHTML/CSSのサイズを増大させるデメリットもあります。サイズのオーバーヘッドなどのHTTPリクエストは、HTTPリクエストの数を最少化することによるスピードの改善がなされないので、HTML/CSSをgzipしない場合には推奨されません。</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#wiki-data-uri">有用なツール</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#data-uri">リファレンス</a></em></p>

  </div>



  <div class="article" id="article-scale">
    <h1 id="scale">
      <a class="tip-title" href="#scale">マークアップでの画像サイズ変更をしない</a>
      <a title="Link" class="anchor" href="#scale">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/images/jp/scale.html.md">✎</a>
    </div>
    
    <p>画像の<code>width</code>と<code>height</code>の属性を常に記述しましょう。これはレンダリング中の不要な再描画と再フローを避けることにつながります。</p>
<pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">width</span>=<span class="hljs-value">"100"</span> <span class="hljs-attribute">height</span>=<span class="hljs-value">"100"</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"logo.jpg"</span> <span class="hljs-attribute">alt</span>=<span class="hljs-value">"Logo"</span>&gt;</span>
</code></pre>
<p>このことを知って、開発者のJohn Qは<em>700x700px</em>の画像を<em>50x50px</em>の画像として表示することにしました。</p>
<p>この開発者が理解していないことは、不要な数十<em>キロバイト</em>がネットワーク上で送信されることです。</p>
<p>常に覚えておいて欲しいのは: HTMLで画像のwidthとheightを記述できることが大きな画像のサイズを変更できることを意味している訳ではないということです。</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/References#dont-rescale-images-in-markup">リファレンス</a></em></p>

  </div>



  <div class="article" id="article-optimize">
    <h1 id="optimize">
      <a class="tip-title" href="#optimize">画像の最適化</a>
      <a title="Link" class="anchor" href="#optimize">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/images/jp/optimize.html.md">✎</a>
    </div>
    
    <p>画像ファイルはウェブには不要なたくさんの情報で構成されています。 例えば、JPEG写真はカメラから<em>Exif</em>メタデータを持ちます（日付、カメラモデル、場所など）。PNGは色、メタデータの情報を持ち、時に埋め込みのサムネイルを持つことさえあります。これらのいずれもブラウザで利用されることはありませんし、ファイルサイズを増やすことにつながります。</p>
<p>不要なデータを削除し、画質を劣化させることなく同様の画像を生成する、画像の最適化ツールがあります。ツールを用いて<em>欠損</em>なしの圧縮ができます。</p>
<p>画像最適化の別の方法は、視覚的な質を犠牲にして圧縮することです。 私たちはこれを<em>損失のある</em>最適化と呼びます。例えば、JPEGをエクスポートするときに品質レベル（0から100の数値で）を選ぶことができます。パフォーマンスを考えて、視覚的に許容範囲の中で最も低い数値を選びましょう。その他の損失のある最適化テクニックはPNGのカラーパレットを減少するかPNG-24のファイルをPNG-8に変換することです。</p>
<p>ユーザー体感のパフォーマンスを改善するために、JPEGファイルをプログレッシブJPEGへ変換すべきです。プログレッシブJPEGはブラウザのサポートが充実していて、作成が容易で、パフォーマンス面での大きな問題もありません。この利点はページに素早く画像を表示できることです（<a href="http://www.patrickmeenan.com/progressive/view.php?img=http://farm2.staticflickr.com/1434/1002257937_021cb46a33_o.jpg">デモ</a>）。</p>
<p><em>&gt; <a href="https://github.com/zenorocha/browser-diet/wiki/Tools#wiki-optimize-your-images">有用なツール</a> / <a href="https://github.com/zenorocha/browser-diet/wiki/References#optimize-your-images">リファレンス</a></em></p>

  </div>




      <h2 id="bonus" class="topics"><span>Bonus</span></h2>



  <div class="article" id="article-tools">
    <h1 id="tools">
      <a class="tip-title" href="#tools">診断ツール: あなたの親友</a>
      <a title="Link" class="anchor" href="#tools">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/bonus/jp/tools.html.md">✎</a>
    </div>
    
    <div class="img-left">
  <img id="geek-43" class="icos-geek" src="http://browserdiet.com/en/assets/img/43.png" alt="Geek #43" width="157" height="275" />
</div>

<p>あなたがウェブパフォーマンスの世界に挑もうと思うのであれば、ブラウザに<a href="http://yslow.org/">YSlow</a>と<a href="https://developers.google.com/speed/pagespeed/insights_extensions">PageSpeed</a>の拡張機能をインストールすることは極めて重要です&mdash;その瞬間から彼らはあなたの親友となります。</p>
<p>それか、オンラインツールを希望するのであれば、<a href="http://www.webpagetest.org/">WebPageTest</a>、<a href="http://httparchive.org/">HTTP Archive</a>か<a href="http://pagespeed.googlelabs.com/">PageSpeed</a>のサイトを訪れてください。</p>
<p>一般的にそれらはあなたのサイトのパフォーマンスを解析し、あなたのサイトに対する滞在的な問題を解決して助けてくれる非常に貴重なアドバイスを伴った成績のレポートを作成してくれます。</p>

  </div>



  <div class="article" id="article-bye">
    <h1 id="bye">
      <a class="tip-title" href="#bye">今日はこれでおしまいです！</a>
      <a title="Link" class="anchor" href="#bye">∞</a>
    </h1>
    
    <div class="line">
      <span class="order rule-counter"></span>
      <a title="Edit" class="edit" href="https://github.com/zenorocha/browser-diet/edit/master/src/documents/bonus/jp/bye.html.md">✎</a>
    </div>
    
    <div class="img-right">
  <img id="geek-31" src="http://browserdiet.com/en/assets/img/31.png" alt="Geek #31" width="162" height="275" />
</div>

<p>このガイドを読み終えた後、あなたがサイトを整備できることを、私たちは期待しています。 :)</p>
<p>そして覚えておいて欲しいのは、人生におけるすべてのことと同じように、<a href="http://www.cs.nott.ac.uk/~cah/G51ISS/Documents/NoSilverBullet.html">銀の弾などない</a>ということです。 あなたのアプリケーションのパフォーマンスチューニングは価値のある冒険ですが、すべての開発における決定の唯一の基礎とすべきではありません。</p>
<p>より深く学びたいと思いますか？ 私たちがこのガイドを作成するのに利用した<a href="https://github.com/zenorocha/browser-diet/wiki/References">リファレンス</a>を確認してください。</p>
<p>提案がありますか？ <a href="http://twitter.com/browserdiet/">@BrowserDiet</a>にツイートを送るか、githubで<a href="https://github.com/zenorocha/browser-diet">プルリクエスト</a>を送ってください。</p>
<p>あなたの友人たちと共有することを忘れずに、みんなのためにより速いウェブを作りましょう。\o/</p>

  </div>




    </div>
  </div>

  <div id="footer">
    <div class="center">
      <p>Develop by <em>Zeno Rocha</em> ● Design by <em>Briza Bueno</em> ● Illustrations by <em>Scott Johnson</em></p>
    </div>
  </div>

  <!-- <a title="Go to the top" id="top" href="#top-bar">
    <img src="http://zenorocha.github.io/browser-diet/en/assets/img/top.png" alt="Go to the top" width="64" height="64">
  </a> -->

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4114546-34']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</body>
</html>
